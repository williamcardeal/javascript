<!DOCTYPE html>
<html>
<head>
  <title>Jogo da Cobra</title>
  <style>
    /* Estilos CSS para o tabuleiro e a cobra */
    #board {
      width: 400px;
      height: 400px;
      border: 1px solid black;
      position: relative;
    }

    .snake {
      width: 20px;
      height: 20px;
      background-color: green;
      position: absolute;
    }

    .food {
      width: 20px;
      height: 20px;
      background-color: red;
      position: absolute;
    }
  </style>
</head>
<body>
  <div id="board"></div>

  <script>
    const BOARD_SIZE = 20; // Tamanho do tabuleiro em células
    const CELL_SIZE = 20; // Tamanho de cada célula em pixels
    const INITIAL_SPEED = 200; // Velocidade inicial da cobra em ms

    let snake = [{x: 0, y: 0}]; // Array de objetos representando o corpo da cobra
    let food = {x: 0, y: 0}; // Objeto representando a posição da comida
    let direction = 'right'; // Direção inicial da cobra
    let speed = INITIAL_SPEED; // Velocidade da cobra em ms
    let gameInterval; // Intervalo de atualização do jogo

    // Função para criar uma posição aleatória no tabuleiro
    function randomPosition() {
      return Math.floor(Math.random() * BOARD_SIZE);
    }

    // Função para atualizar a posição da comida no tabuleiro
    function updateFood() {
      food.x = randomPosition();
      food.y = randomPosition();
      document.getElementById('food').style.left = `${food.x * CELL_SIZE}px`;
      document.getElementById('food').style.top = `${food.y * CELL_SIZE}px`;
    }

    // Função para atualizar a posição da cobra no tabuleiro
    function updateSnake() {
      const snakeHead = snake[0];
      const snakeElement = document.createElement('div');
      snakeElement.className = 'snake';
      snakeElement.style.left = `${snakeHead.x * CELL_SIZE}px`;
      snakeElement.style.top = `${snakeHead.y * CELL_SIZE}px`;
      document.getElementById('board').appendChild(snakeElement);
    }

    // Função para atualizar o tamanho da cobra
    function updateSnakeSize() {
      for (let i = 1; i < snake.length; i++) {
        if (snake[i].x === snake[0].x && snake[i].y === snake[0].y) {
          // Colisão com o próprio corpo da cobra
          gameOver();
          return;
        }
      }

      if (snake.length > 1) {
        // Remover a última parte do corpo da cobra
        const tail = snake.pop();
        document.getElementById('board').removeChild(document.getElementById(`segment-${tail.x}-${tail.y}`));
      }
    }

    // Função para atualizar a direção da cobra com base na entrada do jogador
    function updateDirection() {
      document.addEventListener('keydown', (event) => {
        const key = event.key;
        if ((key === 'ArrowUp' || key === 'w') && direction !== 'down') {
          direction = 'up';
        } else if ((key === 'ArrowDown' || key === 's') && direction !=='down') {
direction = 'down';
} else if ((key === 'ArrowLeft' || key === 'a') && direction !== 'right') {
direction = 'left';
} else if ((key === 'ArrowRight' || key === 'd') && direction !== 'left') {
direction = 'right';
}
});
}
// Função para atualizar a posição da cobra com base na direção atual
function updateSnakePosition() {
  const snakeHead = snake[0];
  let newHead = {};

  if (direction === 'up') {
    newHead = { x: snakeHead.x, y: snakeHead.y - 1 };
  } else if (direction === 'down') {
    newHead = { x: snakeHead.x, y: snakeHead.y + 1 };
  } else if (direction === 'left') {
    newHead = { x: snakeHead.x - 1, y: snakeHead.y };
  } else if (direction === 'right') {
    newHead = { x: snakeHead.x + 1, y: snakeHead.y };
  }

  snake.unshift(newHead); // Adicionar a nova posição da cabeça da cobra no início do array

  // Verificar se a cobra comeu a comida
  if (snakeHead.x === food.x && snakeHead.y === food.y) {
    updateFood();
    updateSnakeSize();
    speed -= 10; // Aumentar a velocidade do jogo a cada vez que a cobra come
  } else {
    snake.pop(); // Remover a última parte do corpo da cobra se ela não comeu a comida
  }

  // Verificar se a cobra colidiu com as bordas do tabuleiro
  if (snakeHead.x < 0 || snakeHead.x >= BOARD_SIZE || snakeHead.y < 0 || snakeHead.y >= BOARD_SIZE) {
    gameOver();
  }
}

// Função para encerrar o jogo
function gameOver() {
  clearInterval(gameInterval); // Limpar o intervalo de atualização do jogo
  alert('Fim de jogo!'); // Exibir mensagem de fim de jogo
  location.reload(); // Reiniciar o jogo após o fim de jogo
}

// Função para iniciar o jogo
function startGame() {
  updateFood();
  updateSnake();
  updateDirection();
  gameInterval = setInterval(() => {
    updateSnakePosition();
  }, speed);
}

// Iniciar o jogo quando a página carregar
window.addEventListener('load', () => {
  startGame();
});

</script>
</body>
</html>